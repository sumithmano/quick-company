(this.webpackJsonpclient_src=this.webpackJsonpclient_src||[]).push([[0],{32:function(e,t,a){e.exports=a(60)},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=a(7),s=a(1),i=a(3),u=a(4),m=a(6),d=a(5),v=function e(){Object(i.a)(this,e)};v.baseUrl="/api";var f=v,h=a(13),b=a.n(h),p=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.call(this)}return Object(u.a)(a,null,[{key:"login",value:function(e){var t=a.baseUrl+"/users/login";return b.a.post(t,e).then((function(e){return e.data&&(localStorage.setItem("access_token",e.data.id),localStorage.setItem("userId",e.data.userId)),e.data}))}},{key:"create",value:function(e){var t=a.baseUrl+"/users";return b.a.post(t,e).then((function(e){return e.data}))}},{key:"isAthenticated",value:function(){return!!localStorage.getItem("access_token")}},{key:"userId",value:function(){return localStorage.getItem("userId")}},{key:"logout",value:function(){var e="http://localhost:3000/api/Users/logout?access_token="+localStorage.getItem("access_token");return b.a.post(e).catch((function(e){return console.log(e)})).finally((function(){localStorage.removeItem("access_token")}))}}]),a}(f),E=a(19),g=a(9),y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.call(this)}return Object(u.a)(a,null,[{key:"getCompanyList",value:function(){var e=localStorage.getItem("access_token"),t=a.baseUrl+"/companies",n={access_token:e,filter:{include:"favourites"}};return b.a.get(t,{params:n}).then((function(e){return e&&e.data||[]}))}}]),a}(f),N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.call(this)}return Object(u.a)(a,null,[{key:"addFavourite",value:function(e){var t=a.baseUrl+"/favourites";return b.a.post(t,e).then((function(e){return e&&e.data||{}}))}},{key:"removeFavourite",value:function(e){var t="http://localhost:3000/api/favourites"+"/".concat(e);return b.a.delete(t).then((function(e){return e&&e.data||{}}))}}]),a}(f),w=function(e){return r.a.createElement("li",{className:"collection-item row"},e.item.name,r.a.createElement("button",{className:"btn btn-small btn-floating yellow right",onClick:function(){return e.toggleFavourite(e.item)}},e.item.isFavourite?r.a.createElement("i",{className:"fa fa-star"}):r.a.createElement("i",{className:"fa fa-plus"})))},k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={rawCompanyList:[],processedList:[],userId:"",enableSort:!1,searchKey:""},n.toggleFavourite=n.toggleFavourite.bind(Object(g.a)(n)),n.toggleSort=n.toggleSort.bind(Object(g.a)(n)),n.onSearchChange=n.onSearchChange.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getCompanyList()}},{key:"getCompanyList",value:function(){var e=this;y.getCompanyList().then((function(t){var a=p.userId(),n=e.props.onlyFav,r=t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{isFavourite:e.favourites.some((function(e){return e.userId===a}))})})).filter((function(e){return!n||e.isFavourite}));e.setState({rawCompanyList:r,processedList:r,userId:p.userId()})})).catch((function(t){console.log(t),e.props.history.push("/login")}))}},{key:"toggleFavourite",value:function(e){var t=this,a=this.state.userId;if(e.isFavourite){var n=e.favourites.find((function(e){return e.userId===a}));N.removeFavourite(n.id).then((function(e){t.getCompanyList()})).catch((function(e){return console.log(e)}))}else N.addFavourite({userId:a,comapanyId:e.id}).then((function(e){t.getCompanyList()})).catch((function(e){return console.log(e)}))}},{key:"processList",value:function(){var e=this.state,t=e.rawCompanyList,a=e.searchKey,n=e.enableSort,r=t.filter((function(e){return e.name.includes(a)}));n&&r.sort(),this.setState({processedList:r})}},{key:"toggleSort",value:function(){var e=this;this.setState({enableSort:!this.state.enableSort},(function(){return e.processList()}))}},{key:"onSearchChange",value:function(e){var t=this;this.setState({searchKey:e.target.value},(function(){return t.processList()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.processedList,n=t.userId,l=t.enableSort;return r.a.createElement("div",{className:"section"},this.props.onlyFav?r.a.createElement(o.b,{className:"btn grey",to:"/"},"BACK"):r.a.createElement(o.b,{className:"btn",to:"/favourite"},"Favourite"),r.a.createElement("button",{onClick:this.toggleSort,className:"btn right ".concat(l?"":"grey")},r.a.createElement("i",{className:"fa fa-sort"})),r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("form",{autoComplete:"off"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"search",type:"search",onChange:this.onSearchChange,placeholder:"search here"}),r.a.createElement("label",{className:"label-icon",htmlFor:"search"},r.a.createElement("i",{className:"fa fa-search"}))))),a.length?r.a.createElement("ul",{className:"collection"},a.map((function(t){return r.a.createElement(w,{item:t,key:t.name,userId:n,toggleFavourite:e.toggleFavourite})}))):r.a.createElement("div",{className:"section"},"No Company available"))}}]),a}(n.Component),j=Object(s.g)(k),O=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"About"))},S=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.emailRef.value,password:this.passwordRef.value};p.login(a).then((function(e){t.props.history.push("/")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("img",{className:"responsive-img",style:{width:"100px"},src:"./icon.svg"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h5",{className:"indigo-text"},"Please, login into your account"),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"z-depth-1 grey lighten-4 row",style:{display:"inline-block",padding:"32px 48px 0px 48px",border:"1px solid #EEE",minWidth:"390px"}},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field s12"},r.a.createElement("input",{className:"validate",type:"email",name:"email",ref:function(t){return e.emailRef=t}}),r.a.createElement("label",{htmlFor:"email"},"Enter your email"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"password",name:"password",ref:function(t){return e.passwordRef=t}}),r.a.createElement("label",{htmlFor:"password"},"Enter your password")),r.a.createElement("label",{className:"right"},r.a.createElement("a",{className:"pink-text",href:"#!"},r.a.createElement("b",null,"Forgot Password?")))),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit",name:"btn_login",className:"col s12 btn btn-large waves-effect indigo"},"Login")))))),r.a.createElement(o.b,{to:"/create"},"Create account")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(n.Component),C=Object(s.g)(S),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.passwordRef1.value==this.passwordRef2.value){var a={email:this.emailRef.value,password:this.passwordRef1.value};p.create(a).then((function(e){t.props.history.push("/login")})).catch((function(e){return console.log(e)}))}else M.toast({html:"Passwords don't match",classes:"rounded"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("img",{className:"responsive-img",style:{width:"100px"},src:"./icon.svg"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h5",{className:"indigo-text"},"Create your account"),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"z-depth-1 grey lighten-4 row",style:{display:"inline-block",padding:"32px 48px 0px 48px",border:"1px solid #EEE",minWidth:"390px"}},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field s12"},r.a.createElement("input",{className:"validate",type:"email",name:"email",ref:function(t){return e.emailRef=t}}),r.a.createElement("label",{htmlFor:"email"},"Enter your email"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"password",name:"password",ref:function(t){return e.passwordRef1=t}}),r.a.createElement("label",{htmlFor:"password"},"Enter your password"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{className:"validate",type:"password",name:"password",ref:function(t){return e.passwordRef2=t}}),r.a.createElement("label",{htmlFor:"password"},"Confirm your password"))),r.a.createElement("center",null,r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit",name:"btn_login",className:"col s12 btn btn-large waves-effect indigo"},"Create"))))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}]),a}(n.Component),I=Object(s.g)(F),x=function(){return r.a.createElement("main",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/about",component:O}),r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return p.isAthenticated()?r.a.createElement(j,{key:"1"}):r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{exact:!0,path:"/favourite",render:function(){return p.isAthenticated()?r.a.createElement(j,{key:"2",onlyFav:!0}):r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{exact:!0,path:"/login",render:function(){return p.isAthenticated()?r.a.createElement(s.a,{to:"/"}):r.a.createElement(C,null)}}),r.a.createElement(s.b,{exact:!0,path:"/create",render:function(){return p.isAthenticated()?r.a.createElement(s.a,{to:"/"}):r.a.createElement(I,null)}})))},L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onSideClose=n.onSideClose.bind(Object(g.a)(n)),n.logoutClick=n.logoutClick.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){M.Sidenav.init(this.sidenav)}},{key:"onSideClose",value:function(){M.Sidenav.getInstance(this.sidenav).close()}},{key:"logoutClick",value:function(){var e=this;p.logout().finally((function(){e.props.history.push("/login")}))}},{key:"render",value:function(){var e=this;return p.isAthenticated()?r.a.createElement("div",null,r.a.createElement("nav",{className:"blue darken-3"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("a",{href:"/",className:"brand-logo center"},"Quick Company"),r.a.createElement("a",{"data-target":"main-menu",className:"sidenav-trigger show-on-large"},r.a.createElement("i",{className:"fa fa-bars"})),r.a.createElement("ul",{className:"right hide-on-small-only"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"Company")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},"About")),r.a.createElement("li",null,r.a.createElement("a",{type:"button",onClick:this.logoutClick},"Logout"))))),r.a.createElement("ul",{onClick:this.onSideClose,ref:function(t){e.sidenav=t},className:"sidenav",id:"main-menu"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},r.a.createElement("i",{className:"fa fa-suitcase"}),"Company")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/about"},r.a.createElement("i",{className:"fa fa-question-circle"}),"About")))):null}}]),a}(n.Component),R=Object(s.g)(L),_=(a(59),function(){return r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement("div",{className:"container"},r.a.createElement(x,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.a6dee2ae.chunk.js.map
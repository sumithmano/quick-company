(this.webpackJsonpclient_src=this.webpackJsonpclient_src||[]).push([[0],{32:function(e,t,a){e.exports=a(60)},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),c=a.n(r),o=a(7),i=a(1),s=a(3),u=a(4),m=a(6),d=a(5),h=function e(){Object(s.a)(this,e)};h.baseUrl="http://localhost:3000/api";var f=h,p=a(13),v=a.n(p),b=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.call(this)}return Object(u.a)(a,null,[{key:"login",value:function(e){return v.a.post("http://localhost:3000/api/Users/login",e).then((function(e){return e.data&&(localStorage.setItem("access_token",e.data.id),localStorage.setItem("userId",e.data.userId)),e.data}))}},{key:"create",value:function(e){return v.a.post("http://localhost:3000/api/Users",e).then((function(e){return e.data}))}},{key:"isAthenticated",value:function(){return!!localStorage.getItem("access_token")}},{key:"userId",value:function(){return localStorage.getItem("userId")}},{key:"logout",value:function(){var e="http://localhost:3000/api/Users/logout?access_token="+localStorage.getItem("access_token");return v.a.post(e).catch((function(e){return console.log(e)})).finally((function(){localStorage.removeItem("access_token")}))}}]),a}(f),E=a(19),g=a(9),y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.call(this)}return Object(u.a)(a,null,[{key:"getCompanyList",value:function(){var e={access_token:localStorage.getItem("access_token"),filter:{include:"favourites"}};return v.a.get("http://localhost:3000/api/companies",{params:e}).then((function(e){return e&&e.data||[]}))}}]),a}(f),N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.call(this)}return Object(u.a)(a,null,[{key:"addFavourite",value:function(e){return v.a.post("http://localhost:3000/api/favourites",e).then((function(e){return e&&e.data||{}}))}},{key:"removeFavourite",value:function(e){var t="http://localhost:3000/api/favourites"+"/".concat(e);return v.a.delete(t).then((function(e){return e&&e.data||{}}))}}]),a}(f),w=function(e){return l.a.createElement("li",{className:"collection-item row"},e.item.name,l.a.createElement("button",{className:"btn btn-small btn-floating yellow right",onClick:function(){return e.toggleFavourite(e.item)}},e.item.isFavourite?l.a.createElement("i",{className:"fa fa-star"}):l.a.createElement("i",{className:"fa fa-plus"})))},k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={rawCompanyList:[],processedList:[],userId:"",enableSort:!1,searchKey:""},n.toggleFavourite=n.toggleFavourite.bind(Object(g.a)(n)),n.toggleSort=n.toggleSort.bind(Object(g.a)(n)),n.onSearchChange=n.onSearchChange.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getCompanyList()}},{key:"getCompanyList",value:function(){var e=this;y.getCompanyList().then((function(t){var a=b.userId(),n=e.props.onlyFav,l=t.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{isFavourite:e.favourites.some((function(e){return e.userId===a}))})})).filter((function(e){return!n||e.isFavourite}));e.setState({rawCompanyList:l,processedList:l,userId:b.userId()})})).catch((function(t){console.log(t),e.props.history.push("/login")}))}},{key:"toggleFavourite",value:function(e){var t=this,a=this.state.userId;if(e.isFavourite){var n=e.favourites.find((function(e){return e.userId===a}));N.removeFavourite(n.id).then((function(e){t.getCompanyList()})).catch((function(e){return console.log(e)}))}else N.addFavourite({userId:a,comapanyId:e.id}).then((function(e){t.getCompanyList()})).catch((function(e){return console.log(e)}))}},{key:"processList",value:function(){var e=this.state,t=e.rawCompanyList,a=e.searchKey,n=e.enableSort,l=t.filter((function(e){return e.name.includes(a)}));n&&l.sort(),this.setState({processedList:l})}},{key:"toggleSort",value:function(){var e=this;this.setState({enableSort:!this.state.enableSort},(function(){return e.processList()}))}},{key:"onSearchChange",value:function(e){var t=this;this.setState({searchKey:e.target.value},(function(){return t.processList()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.processedList,n=t.userId,r=t.enableSort;return l.a.createElement("div",{className:"section"},this.props.onlyFav?l.a.createElement(o.b,{className:"btn grey",to:"/"},"BACK"):l.a.createElement(o.b,{className:"btn",to:"/favourite"},"Favourite"),l.a.createElement("button",{onClick:this.toggleSort,className:"btn right ".concat(r?"":"grey")},l.a.createElement("i",{className:"fa fa-sort"})),l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("form",{autoComplete:"off"},l.a.createElement("div",{className:"input-field"},l.a.createElement("input",{id:"search",type:"search",onChange:this.onSearchChange,placeholder:"search here"}),l.a.createElement("label",{className:"label-icon",htmlFor:"search"},l.a.createElement("i",{className:"fa fa-search"}))))),a.length?l.a.createElement("ul",{className:"collection"},a.map((function(t){return l.a.createElement(w,{item:t,key:t.name,userId:n,toggleFavourite:e.toggleFavourite})}))):l.a.createElement("div",{className:"section"},"No Company available"))}}]),a}(n.Component),j=Object(i.g)(k),O=function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"About"))},S=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.emailRef.value,password:this.passwordRef.value};b.login(a).then((function(e){t.props.history.push("/")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("img",{className:"responsive-img",style:{width:"100px"},src:"./icon.svg"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h5",{className:"indigo-text"},"Please, login into your account"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"z-depth-1 grey lighten-4 row",style:{display:"inline-block",padding:"32px 48px 0px 48px",border:"1px solid #EEE",minWidth:"390px"}},l.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field s12"},l.a.createElement("input",{className:"validate",type:"email",name:"email",ref:function(t){return e.emailRef=t}}),l.a.createElement("label",{htmlFor:"email"},"Enter your email"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{className:"validate",type:"password",name:"password",ref:function(t){return e.passwordRef=t}}),l.a.createElement("label",{htmlFor:"password"},"Enter your password")),l.a.createElement("label",{className:"right"},l.a.createElement("a",{className:"pink-text",href:"#!"},l.a.createElement("b",null,"Forgot Password?")))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("div",{className:"row"},l.a.createElement("button",{type:"submit",name:"btn_login",className:"col s12 btn btn-large waves-effect indigo"},"Login")))))),l.a.createElement(o.b,{to:"/create"},"Create account")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}}]),a}(n.Component),C=Object(i.g)(S),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.passwordRef1.value==this.passwordRef2.value){var a={email:this.emailRef.value,password:this.passwordRef1.value};b.create(a).then((function(e){t.props.history.push("/login")})).catch((function(e){return console.log(e)}))}else M.toast({html:"Passwords don't match",classes:"rounded"})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("img",{className:"responsive-img",style:{width:"100px"},src:"./icon.svg"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h5",{className:"indigo-text"},"Create your account"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"z-depth-1 grey lighten-4 row",style:{display:"inline-block",padding:"32px 48px 0px 48px",border:"1px solid #EEE",minWidth:"390px"}},l.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field s12"},l.a.createElement("input",{className:"validate",type:"email",name:"email",ref:function(t){return e.emailRef=t}}),l.a.createElement("label",{htmlFor:"email"},"Enter your email"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{className:"validate",type:"password",name:"password",ref:function(t){return e.passwordRef1=t}}),l.a.createElement("label",{htmlFor:"password"},"Enter your password"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s12"},l.a.createElement("input",{className:"validate",type:"password",name:"password",ref:function(t){return e.passwordRef2=t}}),l.a.createElement("label",{htmlFor:"password"},"Confirm your password"))),l.a.createElement("center",null,l.a.createElement("div",{className:"row"},l.a.createElement("button",{type:"submit",name:"btn_login",className:"col s12 btn btn-large waves-effect indigo"},"Create"))))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}}]),a}(n.Component),I=Object(i.g)(F),x=function(){return l.a.createElement("main",null,l.a.createElement(i.d,null,l.a.createElement(i.b,{exact:!0,path:"/about",component:O}),l.a.createElement(i.b,{exact:!0,path:"/",render:function(){return b.isAthenticated()?l.a.createElement(j,{key:"1"}):l.a.createElement(i.a,{to:"/login"})}}),l.a.createElement(i.b,{exact:!0,path:"/favourite",render:function(){return b.isAthenticated()?l.a.createElement(j,{key:"2",onlyFav:!0}):l.a.createElement(i.a,{to:"/login"})}}),l.a.createElement(i.b,{exact:!0,path:"/login",render:function(){return b.isAthenticated()?l.a.createElement(i.a,{to:"/"}):l.a.createElement(C,null)}}),l.a.createElement(i.b,{exact:!0,path:"/create",render:function(){return b.isAthenticated()?l.a.createElement(i.a,{to:"/"}):l.a.createElement(I,null)}})))},L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onSideClose=n.onSideClose.bind(Object(g.a)(n)),n.logoutClick=n.logoutClick.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){M.Sidenav.init(this.sidenav)}},{key:"onSideClose",value:function(){M.Sidenav.getInstance(this.sidenav).close()}},{key:"logoutClick",value:function(){var e=this;b.logout().finally((function(){e.props.history.push("/login")}))}},{key:"render",value:function(){var e=this;return b.isAthenticated()?l.a.createElement("div",null,l.a.createElement("nav",{className:"blue darken-3"},l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement("a",{href:"/",className:"brand-logo center"},"Quick Company"),l.a.createElement("a",{"data-target":"main-menu",className:"sidenav-trigger show-on-large"},l.a.createElement("i",{className:"fa fa-bars"})),l.a.createElement("ul",{className:"right hide-on-small-only"},l.a.createElement("li",null,l.a.createElement(o.b,{to:"/"},"Company")),l.a.createElement("li",null,l.a.createElement(o.b,{to:"/about"},"About")),l.a.createElement("li",null,l.a.createElement("a",{type:"button",onClick:this.logoutClick},"Logout"))))),l.a.createElement("ul",{onClick:this.onSideClose,ref:function(t){e.sidenav=t},className:"sidenav",id:"main-menu"},l.a.createElement("li",null,l.a.createElement(o.b,{to:"/"},l.a.createElement("i",{className:"fa fa-suitcase"}),"Company")),l.a.createElement("li",null,l.a.createElement(o.b,{to:"/about"},l.a.createElement("i",{className:"fa fa-question-circle"}),"About")))):null}}]),a}(n.Component),R=Object(i.g)(L),_=(a(59),function(){return l.a.createElement("div",null,l.a.createElement(R,null),l.a.createElement("div",{className:"container"},l.a.createElement(x,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(o.a,null,l.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.e422e6d7.chunk.js.map